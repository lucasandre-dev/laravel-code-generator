<?php

namespace Src\domain\%PascalCase%\Actions;

use Src\domain\%PascalCase%\Contracts\%PascalCase%RepositoryInterface;
use Src\domain\%PascalCase%\DTO\GetAll%PascalCase%sInputDto;
use Src\domain\%PascalCase%\DTO\%PascalCase%OutputDto;
use Src\domain\%PascalCase%\Mappers\%PascalCase%Mapper;

final readonly class GetAll%PascalCase%sAction
{
    private %PascalCase%RepositoryInterface $%camelCase%Repository;

    /**
     * @param %PascalCase%RepositoryInterface $%camelCase%Repository
     */
    public function __construct(%PascalCase%RepositoryInterface $%camelCase%Repository)
    {
        $this->%camelCase%Repository = $%camelCase%Repository;
    }

    /**
     * @param GetAll%PascalCase%sInputDto $inputDto
     * @return %PascalCase%OutputDto[]
     */
    public function execute(GetAll%PascalCase%sInputDto $inputDto): array
    {
        $all%PascalCase%s = $this->%camelCase%Repository->getAll($inputDto->filters);

        $all%PascalCase%sOutput = [];
        foreach ($all%PascalCase%s as $%camelCase%) {
            $all%PascalCase%sOutput[] = %PascalCase%Mapper::entityToOutputDto($%camelCase%);
        }

        return $all%PascalCase%sOutput;
    }
}
